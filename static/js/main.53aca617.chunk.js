(this["webpackJsonppaul-instagram"]=this["webpackJsonppaul-instagram"]||[]).push([[0],{35:function(e,t,a){},36:function(e,t,a){},43:function(e,t,a){e.exports=a(65)},48:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(9),c=a.n(s),o=(a(48),a(25)),l=a(5),i=a(14),u=a.n(i),m=(u.a.initializeApp({apiKey:"AIzaSyDYhuLhHMX9wBaVGRZiEGCgeFR0HMFT1wY",authDomain:"paul-react-instagram.firebaseapp.com",databaseURL:"https://paul-react-instagram.firebaseio.com",projectId:"paul-react-instagram",storageBucket:"paul-react-instagram.appspot.com",messagingSenderId:"939993072376",appId:"1:939993072376:web:d508de1cadd54651ef710d"}),u.a.firestore()),p=u.a.auth(),d=u.a.storage(),g=(a(35),a(85));var f=function(e){var t=e.setOpen,a=e.setOpenSignin,n=e.user;return r.a.createElement("div",{className:"header-container"},r.a.createElement("h4",null,"instagram"),n?r.a.createElement(g.a,{onClick:function(){return p.signOut()}},"Logout"):r.a.createElement("div",{className:"login_container"},r.a.createElement(g.a,{onClick:function(){return a(!0)}},"Sign In"),r.a.createElement(g.a,{onClick:function(){return t(!0)}},"Sign Up")))};a(63),a(36);var E=function(e){var t=e.username,a=e.imgURL,s=e.caption,c=e.postId,o=e.user,i=Object(n.useState)([]),p=Object(l.a)(i,2),d=p[0],f=p[1],E=Object(n.useState)(""),v=Object(l.a)(E,2),h=v[0],b=v[1];return Object(n.useEffect)((function(){var e;return c&&(e=m.collection("user_posts").doc(c).collection("comments").orderBy("timestamp","desc").onSnapshot((function(e){f(e.docs.map((function(e){return e.data()})))}))),function(){e()}}),[c]),r.a.createElement("div",{className:"post-container"},r.a.createElement("div",{className:"post-header"},r.a.createElement("div",{className:"header-avatar"},"R"),r.a.createElement("div",{className:"post-details"},r.a.createElement("h3",null,t),r.a.createElement("h6",null,"user location"))),r.a.createElement("div",{className:"post-image"},r.a.createElement("img",{className:"post-url",src:a,alt:"paul"})),r.a.createElement("div",{className:"post-caption"},r.a.createElement("h5",null,r.a.createElement("strong",null,t),s),r.a.createElement("div",{className:"post_comments"},d.map((function(e){return r.a.createElement("p",null,r.a.createElement("strong",null,e.username),">",e.text)}))),r.a.createElement("form",{className:"post_comment"},r.a.createElement("input",{type:"text",className:"post_input",placeholder:"Add a comment...",value:h,onChange:function(e){return b(e.target.value)}}),r.a.createElement(g.a,{className:"post_btn",disabled:!h,type:"submit",onClick:function(e){e.preventDefault(),m.collection("user_posts").doc(c).collection("comments").add({text:h,username:o.displayName,timestamp:u.a.firestore.FieldValue.serverTimestamp()}),b("")}},"Post"))))};var v=function(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),s=a[0],c=a[1];return Object(n.useEffect)((function(){m.collection("user_posts").orderBy("timestamp","desc").onSnapshot((function(e){c(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]),r.a.createElement("div",{className:"app_post"},s.map((function(t){var a=t.id,n=t.post;return r.a.createElement(E,{key:a,user:e,postId:a,username:n.username,imgURL:n.imgURL,caption:n.caption})})))};a(64);var h=function(e){var t=e.username,a=Object(n.useState)(""),s=Object(l.a)(a,2),c=s[0],o=s[1],i=Object(n.useState)(""),p=Object(l.a)(i,2),f=p[0],E=p[1],v=Object(n.useState)(""),h=Object(l.a)(v,2),b=h[0],O=h[1];return r.a.createElement("div",{className:"image_upload"},r.a.createElement("progress",{className:"progress",value:b,max:"100"}),r.a.createElement("input",{type:"text",placeholder:"Enter a caption...",onChange:function(e){return o(e.target.value)},value:c}),r.a.createElement("input",{type:"file",onChange:function(e){e.target.files[0]&&E(e.target.files[0])}}),r.a.createElement(g.a,{className:"imageupload_btn",onClick:function(){d.ref("images/".concat(f.name)).put(f).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);O(t)}),(function(e){console.log(e.message)}),(function(){d.ref("images").child(f.name).getDownloadURL().then((function(e){m.collection("user_posts").add({timestamp:u.a.firestore.FieldValue.serverTimestamp(),caption:c,imgURL:e,username:t}),O(""),o(""),E("")}))}))}},"Upload"))},b=a(84),O=a(86);var S=function(e){var t=e.modalStyle,a=e.useStyles,s=(e.getModalStyle,e.setOpenSignin),c=e.openSignin,o=(e.username,e.setUsername,e.password),i=e.setPassword,u=a(),m=Object(n.useState)(""),d=Object(l.a)(m,2),f=d[0],E=d[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{open:c,onClose:function(){return s(!1)}},r.a.createElement("div",{style:t,className:u.paper},r.a.createElement("form",{className:"app_signup"},r.a.createElement("center",null,r.a.createElement("h3",null,"instagram")),r.a.createElement("input",{type:"text",placeholder:"email",value:f,onChange:function(e){return E(e.target.value)}}),r.a.createElement("input",{type:"password",placeholder:"password",value:o,onChange:function(e){return i(e.target.value)}}),r.a.createElement(g.a,{onClick:function(e){e.preventDefault(),p.signInWithEmailAndPassword(f,o).catch((function(e){return alert(e.message)})),s(!1)}},"Sign In")))))};var y=function(e){var t=e.modalStyle,a=(e.getModalStyle,e.useStyles),s=e.setOpen,c=e.open,o=e.username,i=e.setUsername,u=e.password,m=e.setPassword,d=a(),f=Object(n.useState)(""),E=Object(l.a)(f,2),v=E[0],h=E[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{open:c,onClose:function(){return s(!1)}},r.a.createElement("div",{style:t,className:d.paper},r.a.createElement("form",{className:"app_signup"},r.a.createElement("center",null,r.a.createElement("h3",null,"instagram")),r.a.createElement("input",{type:"text",placeholder:"username",value:o,onChange:function(e){return i(e.target.value)}}),r.a.createElement("input",{type:"text",placeholder:"email",value:v,onChange:function(e){return h(e.target.value)}}),r.a.createElement("input",{type:"password",placeholder:"password",value:u,onChange:function(e){return m(e.target.value)}}),r.a.createElement(g.a,{onClick:function(e){e.preventDefault(),p.createUserWithEmailAndPassword(v,u).then((function(e){e.user.updateProfile({displayName:o})})).catch((function(e){return alert(e.message)})),s(!1)}},"Sign Up")))))};function j(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var w=Object(b.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));var N=function(){var e,t,a=Object(n.useState)(!1),s=Object(l.a)(a,2),c=s[0],i=s[1],u=Object(n.useState)(j),m=Object(l.a)(u,1)[0],d=Object(n.useState)(""),g=Object(l.a)(d,2),E=g[0],b=g[1],O=Object(n.useState)(""),N=Object(l.a)(O,2),C=N[0],k=N[1],_=Object(n.useState)(""),U=Object(l.a)(_,2),x=U[0],I=U[1],P=Object(n.useState)(null),R=Object(l.a)(P,2),L=R[0],M=R[1],B=Object(n.useState)(!1),A=Object(l.a)(B,2),D=A[0],F=A[1];return Object(n.useEffect)((function(){var e=p.onAuthStateChanged((function(e){if(e){if(console.log(e),M(e),!e.displayName)return e.updateProfile({displayName:x})}else M(null)}));return function(){e()}}),[L,x]),r.a.createElement("div",{className:"app"},r.a.createElement(S,(e={email:E,password:C,setEmail:b,getModalStyle:j,modalStyle:m,useStyles:w,setOpenSignin:F,openSignin:D,username:x,setUsername:I},Object(o.a)(e,"password",C),Object(o.a)(e,"setPassword",k),e)),r.a.createElement(y,(t={modalStyle:m,email:E,setEmail:b,password:C,getModalStyle:j,useStyles:w,setOpen:i,open:c,username:x,setUsername:I},Object(o.a)(t,"password",C),Object(o.a)(t,"setPassword",k),t)),r.a.createElement(f,{setOpenSignin:F,setOpen:i,user:L}),r.a.createElement(v,{user:L}),(null===L||void 0===L?void 0:L.displayName)?r.a.createElement(h,{username:L.displayName}):r.a.createElement("h2",null,"Sorry you need to login"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[43,1,2]]]);
//# sourceMappingURL=main.53aca617.chunk.js.map