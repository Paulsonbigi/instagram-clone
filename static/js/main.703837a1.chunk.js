(this["webpackJsonppaul-instagram"]=this["webpackJsonppaul-instagram"]||[]).push([[0],{37:function(e,t,a){},38:function(e,t,a){},44:function(e,t,a){e.exports=a(69)},49:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){e.exports=a.p+"static/media/img1.5dee8a14.jpg"},66:function(e,t,a){e.exports=a.p+"static/media/img2.ecb24757.jpg"},67:function(e,t,a){e.exports=a.p+"static/media/img3.435ac440.jpg"},68:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),s=a.n(c),o=(a(49),a(26)),l=a(5),i=a(17),u=a.n(i),m=(u.a.initializeApp({apiKey:"AIzaSyDYhuLhHMX9wBaVGRZiEGCgeFR0HMFT1wY",authDomain:"paul-react-instagram.firebaseapp.com",databaseURL:"https://paul-react-instagram.firebaseio.com",projectId:"paul-react-instagram",storageBucket:"paul-react-instagram.appspot.com",messagingSenderId:"939993072376",appId:"1:939993072376:web:d508de1cadd54651ef710d"}),u.a.firestore()),p=u.a.auth(),d=u.a.storage(),g=(a(37),a(88));var f=function(e){var t=e.setOpen,a=e.setOpenSignin,n=e.user;return r.a.createElement("div",{className:"header-container"},r.a.createElement("h4",null,"instagram"),n?r.a.createElement(g.a,{onClick:function(){return p.signOut()}},"Logout"):r.a.createElement("div",{className:"login_container"},r.a.createElement(g.a,{onClick:function(){return a(!0)}},"Sign In"),r.a.createElement(g.a,{onClick:function(){return t(!0)}},"Sign Up")))};a(64),a(38);var E=function(e){var t=e.username,a=e.imgURL,c=e.caption,s=e.postId,o=Object(n.useState)(""),i=Object(l.a)(o,2),u=(i[0],i[1]),p=Object(n.useState)(""),d=Object(l.a)(p,2),f=d[0],E=d[1];return Object(n.useEffect)((function(){var e;return s&&(e=m.collection("user_posts").doc(s).collection("comments").onSnapshot((function(e){u(e.docs.map((function(e){return e.data([])})))}))),function(){e()}}),[s]),r.a.createElement("div",{className:"post-container"},r.a.createElement("div",{className:"post-header"},r.a.createElement("div",{className:"header-avatar"},"R"),r.a.createElement("div",{className:"post-details"},r.a.createElement("h3",null,t),r.a.createElement("h6",null,"user location"))),r.a.createElement("div",{className:"post-image"},r.a.createElement("img",{className:"post-url",src:a,alt:"paul"})),r.a.createElement("div",{className:"post-caption"},r.a.createElement("h5",null,r.a.createElement("strong",null,t),c),r.a.createElement("div",{className:"post_comments"}),r.a.createElement("form",{className:"post_comment"},r.a.createElement("input",{type:"text",className:"post_input",placeholder:"Add a comment...",value:f,onChange:function(e){return E(e.target.value)}}),r.a.createElement(g.a,{className:"post_btn",disabled:!f,type:"submit",onClick:function(e){}},"Post"))))};a(65),a(66),a(67);var v=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){m.collection("user_posts").orderBy("timestamp","desc").onSnapshot((function(e){c(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]),r.a.createElement("div",{className:"app_post"},a.map((function(e){var t=e.id,a=e.post;return r.a.createElement(E,{key:t,postId:t,username:a.username,imgURL:a.imgURL,caption:a.caption})})))};a(68);var b=function(e){var t=e.username,a=Object(n.useState)(""),c=Object(l.a)(a,2),s=c[0],o=c[1],i=Object(n.useState)(""),p=Object(l.a)(i,2),f=p[0],E=p[1],v=Object(n.useState)(""),b=Object(l.a)(v,2),h=b[0],O=b[1];return r.a.createElement("div",{className:"image_upload"},r.a.createElement("progress",{className:"progress",value:h,max:"100"}),r.a.createElement("input",{type:"text",placeholder:"Enter a caption...",onChange:function(e){return o(e.target.value)},value:s}),r.a.createElement("input",{type:"file",onChange:function(e){e.target.files[0]&&E(e.target.files[0])}}),r.a.createElement(g.a,{className:"imageupload_btn",onClick:function(){d.ref("images/".concat(f.name)).put(f).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);O(t)}),(function(e){console.log(e.message)}),(function(){d.ref("images").child(f.name).getDownloadURL().then((function(e){m.collection("user_posts").add({timestamp:u.a.firestore.FieldValue.serverTimestamp(),caption:s,imgURL:e,username:t}),O(""),o(""),E("")}))}))}},"Upload"))},h=a(87),O=a(89);var S=function(e){var t=e.modalStyle,a=e.useStyles,c=(e.getModalStyle,e.setOpenSignin),s=e.openSignin,o=(e.username,e.setUsername,e.password),i=e.setPassword,u=a(),m=Object(n.useState)(""),d=Object(l.a)(m,2),f=d[0],E=d[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{open:s,onClose:function(){return c(!1)}},r.a.createElement("div",{style:t,className:u.paper},r.a.createElement("form",{className:"app_signup"},r.a.createElement("center",null,r.a.createElement("h3",null,"instagram")),r.a.createElement("input",{type:"text",placeholder:"email",value:f,onChange:function(e){return E(e.target.value)}}),r.a.createElement("input",{type:"password",placeholder:"password",value:o,onChange:function(e){return i(e.target.value)}}),r.a.createElement(g.a,{onClick:function(e){e.preventDefault(),p.signInWithEmailAndPassword(f,o).catch((function(e){return alert(e.message)})),c(!1)}},"Sign In")))))};var j=function(e){var t=e.modalStyle,a=(e.getModalStyle,e.useStyles),c=e.setOpen,s=e.open,o=e.username,i=e.setUsername,u=e.password,m=e.setPassword,d=a(),f=Object(n.useState)(""),E=Object(l.a)(f,2),v=E[0],b=E[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{open:s,onClose:function(){return c(!1)}},r.a.createElement("div",{style:t,className:d.paper},r.a.createElement("form",{className:"app_signup"},r.a.createElement("center",null,r.a.createElement("h3",null,"instagram")),r.a.createElement("input",{type:"text",placeholder:"username",value:o,onChange:function(e){return i(e.target.value)}}),r.a.createElement("input",{type:"text",placeholder:"email",value:v,onChange:function(e){return b(e.target.value)}}),r.a.createElement("input",{type:"password",placeholder:"password",value:u,onChange:function(e){return m(e.target.value)}}),r.a.createElement(g.a,{onClick:function(e){e.preventDefault(),p.createUserWithEmailAndPassword(v,u).then((function(e){e.user.updateProfile({displayName:o})})).catch((function(e){return alert(e.message)})),c(!1)}},"Sign Up")))))};function y(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var w=Object(h.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));var N=function(){w();var e,t,a=Object(n.useState)([]),c=Object(l.a)(a,2),s=(c[0],c[1],Object(n.useState)(!1)),i=Object(l.a)(s,2),u=i[0],m=i[1],d=Object(n.useState)(y),g=Object(l.a)(d,1)[0],E=Object(n.useState)(""),h=Object(l.a)(E,2),O=h[0],N=(h[1],Object(n.useState)("")),C=Object(l.a)(N,2),k=C[0],U=C[1],_=Object(n.useState)(""),x=Object(l.a)(_,2),I=x[0],P=x[1],R=Object(n.useState)(null),L=Object(l.a)(R,2),M=L[0],A=L[1],B=Object(n.useState)(!1),D=Object(l.a)(B,2),F=D[0],W=D[1];return Object(n.useEffect)((function(){var e=p.onAuthStateChanged((function(e){if(e){if(console.log(e),A(e),!e.displayName)return e.updateProfile({displayName:I})}else A(null)}));return function(){e()}}),[M,I]),r.a.createElement("div",{className:"app"},r.a.createElement(S,(e={email:O,password:k,getModalStyle:y,modalStyle:g,useStyles:w,setOpenSignin:W,openSignin:F,username:I,setUsername:P},Object(o.a)(e,"password",k),Object(o.a)(e,"setPassword",U),e)),r.a.createElement(j,(t={modalStyle:g,email:O,password:k,getModalStyle:y,useStyles:w,setOpen:m,open:u,username:I,setUsername:P},Object(o.a)(t,"password",k),Object(o.a)(t,"setPassword",U),t)),r.a.createElement(f,{setOpenSignin:W,setOpen:m,user:M}),r.a.createElement(v,null),(null===M||void 0===M?void 0:M.displayName)?r.a.createElement(b,{username:M.displayName}):r.a.createElement("h2",null,"Sorry you need to login"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.703837a1.chunk.js.map